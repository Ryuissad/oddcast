<%# app/views/articles/_event_highlight.html.erb %>
<div class="container mx-auto px-6 py-10 mb-6">
  <h1 class="text-3xl font-extrabold mb-6">บทความ</h1>

  <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
    <div class="lg:col-span-7">
      <div class="mb-6">
        <% if article.cover_image.attached? %>
          <%= image_tag article.cover_image, alt: article.title, class: "w-full h-64 object-cover rounded-sm shadow-sm" %>
        <% else %>
          <div class="w-full h-64 flex items-center justify-center bg-gray-200 rounded-sm shadow-sm">
            <span class="text-gray-600">No cover image available.</span>
          </div>
        <% end %>
      </div>
      <h2 class="text-2xl font-extrabold mb-2"><%= article.title %></h2>
      <p class="text-base text-gray-800 mb-6"><%= article.description %></p>
      <%= link_to "SEE MORE →", article_path(article), class: "inline-block bg-neutral-800 hover:bg-neutral-300 hover:text-neutral-950 text-white font-semibold px-5 py-3 rounded-full shadow" %>
    </div>

    <!-- Divider -->
    <div class="hidden lg:block lg:col-span-1">
      <div class="h-full border-l border-gray-200 mx-auto" style="width:1px"></div>
    </div>

    <!-- Sidebar -->
    <div class="lg:col-span-4 space-y-8">
      <%# คุณอาจเอาบทความอื่นมาโชว์ใน sidebar ได้ถ้ามี อันนี้คือ demo fix เป็น array %>
      <% if defined?(@other_articles) && @other_articles.respond_to?(:each) %>
        <% @other_articles.each do |oa| %>
          <div class="flex items-start gap-4">
            <% if oa.cover_image.attached? %>
              <%= image_tag oa.cover_image, alt: oa.title, class: "w-24 h-20 object-cover rounded-sm bg-gray-200" %>
            <% else %>
              <div class="w-24 h-20 flex items-center justify-center rounded-sm bg-gray-200">
                <span class="text-gray-400">No image</span>
              </div>
            <% end %>
            <div>
              <a href="<%= article_path(oa) %>" class="block text-lg font-extrabold hover:underline"><%= oa.title %></a>
              <div class="text-sm text-gray-500 mt-2">
                <%# ถ้าคุณมี author/created_at จะแสดงได้ ถ้าไม่มีก็ตัดออกได้ %>
                <span><%= oa.author if oa.respond_to?(:author) %></span>
                <% if oa.respond_to?(:created_at) %>
                  <span class="text-green-600 font-semibold ml-2"><%= oa.created_at.strftime("%B %d, %Y") %></span>
                <% end %>
              </div>
            </div>
          </div>
        <% end %>
      <% else %>
        <%# เผื่อไม่มี @other_articles จะโชว์เป็นตัวอย่าง static %>
        <% [
          'บทความเทสต์ 1',
          'บทความเทสต์ 2',
          'บทความเทสต์ 3',
          'บทความเทสต์ 4'
        ].each do |title| %>
          <div class="flex items-start gap-4">
            <div class="w-24 h-20 object-cover rounded-sm bg-gray-200"></div>
            <div>
              <a href="#" class="block text-lg font-extrabold hover:underline"><%= title %></a>
              <div class="text-sm text-gray-500 mt-2">
                <span>Lorem Ipsum</span>
                <span class="text-green-600 font-semibold ml-2">JULY 28, 2016</span>
              </div>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>